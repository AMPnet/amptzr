<div class="max-w-6xl mx-auto px-4">
  <div class="mt-6 rounded-3xl shadow-lg bg-white p-4 lg:p-6">
    <div class="flex flex-col">
      <b class="text-sm">Your balance:</b>
      <div class="mt-2 lg:flex lg:w-full lg:items-center lg:justify-between">
        <span class="text-3xl mr-8 font-light">
          <ng-container *ngIf="(paymentTokenBalance$ | async) as paymentTokenBalance">
            <ng-container *ngIf="paymentTokenBalance.value">
             {{ paymentTokenBalance.value | currencyDefault }}
            </ng-container>
            <ng-container *ngIf="paymentTokenBalance.error">
              ‚ùå
            </ng-container>
            <ng-container *ngIf="paymentTokenBalance.loading">
              <app-spinner></app-spinner>
            </ng-container>
          </ng-container>
        </span>

        <!-- Action buttons (deposit, withdraw...) -->
        <div class="flex items-center justify-between space-x-2 mt-2 lg:mt-0">
          <button class="flex items-center justify-center text-white w-full lg:w-auto text-sm rounded-full
          bg-green-600 hover:bg-green-700 py-4 mt-2 lg:mt-0 lg:px-8">
            <svg class="h-3.5 w-3.5 mr-2" width="18" height="14" viewBox="0 0 18 14" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
              <path d="M8.78568 1V7M8.78568 7V13M8.78568 7H16.0255M8.78568 7H1.5459" stroke="white" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="font-semibold tracking-wider">Deposit</span>
          </button>
          <button class="flex items-center justify-center text-white w-full lg:w-auto text-sm rounded-full
          bg-indigo-800 hover:bg-indigo-900 py-4 mt-2 lg:mt-0 lg:px-8">
            <svg class="h-3.5 w-3.5 mr-2" width="22" height="18" viewBox="0 0 22 18" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
              <path
                d="M1.47461 13V14C1.47461 14.7956 1.85599 15.5587 2.53485 16.1213C3.21371 16.6839 4.13444 17 5.0945 17H17.1608C18.1209 17 19.0416 16.6839 19.7204 16.1213C20.3993 15.5587 20.7807 14.7956 20.7807 14V13M15.9542 9L11.1276 13M11.1276 13L6.30113 9M11.1276 13V1"
                stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="font-semibold tracking-wider">Withdraw</span>
          </button>
        </div>
      </div>

      <!-- Wallet Info - User Identity, Provider, Address -->
      <div class="flex flex-col lg:flex-row text-xs lg:items-center justify-between mt-4">
        <p class="flex-grow">{{ userIdentity$ | async }}</p>
        <div class="flex items-center mt-2 lg:mt-0">
          <ng-container *ngIf="(address$ | async) as address">
            <span class="flex-grow-0 mr-6">Wallet address: {{ address | addrShort }}</span>
            <app-value-copy [value]="address" [delay]="1500"
                            textReady="Copy" textCopied="Copied">
            </app-value-copy>
          </ng-container>
        </div>
        <span class="flex-grow-0 mt-2 lg:mt-0">
          Connected with:
          <ng-container *ngIf="(authProvider$ | async) as authProvider">
            <b>{{ authProvider | authProviderName }}</b>
            <button app-action-button *ngIf="authProvider === authProviderType.VENLY"
                    [onClick]="manageVenlyWallets.bind(this)">
              <ng-template #content #loadingContent>
                <span class="underline mx-1">(Manage wallets)</span>
              </ng-template>
            </button>
          </ng-container>
        </span>
      </div>
    </div>
  </div>

  <!-- Transaction History Component -->
  <div class="flex flex-col mt-6">
    <span class="font-semibold">Transaction History</span>
    <div class="flex flex-col mt-4">
      <div *ngFor="let transaction of transactionHistory"
           class="rounded-xl whitespace-nowrap shadow-md bg-white p-4 my-1.5 flex items-center justify-between">
        <div class="flex">
          <div *ngIf="transaction.type === transactionType.DividendPayout"
               class="rounded-full w-10 h-10 bg-green-600 flex justify-center items-center text-white">
            <svg width="18" height="18" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18.2454 7.91846L26.1025 16.0001M26.1025 16.0001L18.2454 24.0817M26.1025 16.0001H5.89844"
                    stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div *ngIf="transaction.type === transactionType.Investment"
               class="rounded-full w-10 h-10 bg-pink-600 flex justify-center items-center text-white">
            <svg width="18" height="18" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.7546 24.0815L5.89748 15.9999M5.89748 15.9999L13.7546 7.91828M5.89748 15.9999L26.1016 15.9999"
                    stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="flex flex-col ml-4">
            <span class="font-semibold">{{ transaction.type }}</span>
            <span>{{ transaction.projectName }}</span>
          </div>
        </div>
        <div class="text-right float-right">{{ transaction.amount | currencyDefault }}</div>
      </div>
    </div>
  </div>
</div>
