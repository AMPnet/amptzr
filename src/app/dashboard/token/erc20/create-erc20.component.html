<div class="flex">
  <div
    routerLink="../.."
    class="ml-4 mt-2 bg-gray-600 text-white text-sm font-semibold rounded-full w-48 py-2 flex flex-row justify-center cursor-pointer"
  >
    < Back
  </div>
</div>

<div class="w-full flex flex-row bg-white shadow-sm p-8 m-4 rounded-lg">
  <div class="">
    <app-info-snippet
      [hasBorderAndBackground]="false"
      [content]="{ title: 'Deploying a smart contract', sections: [
        'Use this screen to deploy a new smart contract.', 'Once you are done, the contract will be available in the Manage tab and you will be able to interact with it through the Dev3 SDK/API or through any other blockchain frontend tools.'
      ]}"
    ></app-info-snippet>
  </div>

</div>

<div class="w-full bg-white shadow-sm p-8 m-4 rounded-lg flex flex-row">
  <div class="w-7/12 pr-4">
    <form class="flex flex-col text-gray-700" [formGroup]="createTokenForm">

      <!-- ALIAS -->

      <div class="p-4 rounded-lg bg-gray-100 border border-gray-200 flex flex-col">
        <label class="pb-1 font-semibold" for="token-name"
        >Token alias</label
      >
      <small class="pb-2"
        >This is the alias you will use to access the token through the Dev3 SDK
        and API</small
      >
      <input
        [class.!border-red-600]="isDirtyAndInvalid('tokenAlias')"
        [class.!border-green-400]="isDirtyAndValid('tokenAlias')"
        class="w-100 rounded-lg border-gray-200 shadow-sm transition-all lowercase border-x-8 text-sm px-4"
        id="token-name"
        type="text"
        autocomplete="off"
        formControlName="tokenAlias"
      />
      <small class="mt-2 text-gray-400">The alias can contain only letters, numbers and dashes</small>
      </div>
      

      <hr class="mt-6 mb-6">

      <!-- NAME -->
      <label class="pb-1 font-semibold" for="token-name"
        >Token name</label
      >
      <small class="pb-2">The name of your token</small>
      <input
        [class.!border-red-600]="isDirtyAndInvalid('tokenName')"
        [class.!border-green-400]="isDirtyAndValid('tokenName')"
        class="w-100 rounded-lg border-gray-200 shadow-sm transition-all border-x-8 text-sm px-4"
        id="token-name"
        type="text"
        autocomplete="off"
        formControlName="tokenName"
      />

      <!-- SYMBOL -->
      <label class="pb-1 mt-8 font-semibold" for="token-name"
        >Token symbol</label
      >
      <small class="pb-2"
        >Shorthand symbol for your token, also known as a "ticker" (e.g. ETH,
        AAPL, ...)</small
      >
      <input
        [class.!border-red-600]="isDirtyAndInvalid('tokenSymbol')"
        [class.!border-green-400]="isDirtyAndValid('tokenSymbol')"
        class="w-100 rounded-lg uppercase shadow-sm border-gray-200 transition-all border-x-8 text-sm px-4"
        id="token-name"
        type="text"
        autocomplete="off"
        formControlName="tokenSymbol"
      />

      <!-- SUPPLY -->
      <label class="pb-1 mt-8 font-semibold" for="token-name"
        >Token supply</label
      >
      <small class="pb-2"
        >How many tokens will be created initially. If your token is burnable or
        mintable, this number can change. If not, this number is fixed.</small
      >
      <div class="flex flex-row justify-between items-center">
        <input
        [class.!border-red-600]="isDirtyAndInvalid('tokenSupply')"
        [class.!border-green-400]="isDirtyAndValid('tokenSupply')"
        class="w-11/12 rounded-lg border-gray-200 border-x-8 transition-all text-sm px-4"
        id="token-name"
        type="number"
        autocomplete="off"
        formControlName="tokenSupply"
        />
        <div class="w-1/12 flex flex-row justify-center text-amber-500">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
          </svg>
        </div>
      </div>
      

      <!-- <div
        class="p-4 border border-gray-200 rounded-xl mt-8 flex flex-col transition-all"
      >
        <div class="flex flex-row justify-between items-center mb-2">
          <label class="text-lg font-semibold" for="can-mint"
            >Is the token mintable?</label
          >
          <label class="switch">
            <input
              type="checkbox"
              [value]="checkSelected$ | async"
              (change)="onCheckChange($event)"
            />
            <span class="slider round"></span>
          </label>
        </div>
        <small class="pb-2 text-justify"
          >If your token is mintable, you will need to assign an entity (addess,
          wallet or smart contract) which can freely create new tokens.
          <a class="text-violet-800 underline" href="">Learn more</a>
        </small>
        <hr class="mt-4 mb-4" [hidden]="(checkSelected$ | async) === false" />
        <div class="invisibleComp" [class.visibleComp]="checkSelected$ | async">
          <div class="flex flex-col">
            <label class="pb-1 font-semibold" for="allowed-to-mint"
              >Who is allowed to mint the tokens?</label
            >
            <small class="pb-2 text-justify"
              >Tokens can be minted either by yourself, somebody else
              <i>or</i> by a smart contract representing a group of people or a
              protocol. <br /><br />Once you set the entity allowed to mint,
              only that entity will be able to change the minter permission.
            </small>
            <input
              class="w-100 rounded-xl border-gray-200"
              id="allowed-to-ming"
              type="text"
              formControlName="tokenName"
            />
          </div>
        </div>
      </div> -->

      <div class="flex flex-row justify-end">
        <button app-action-button
          [disabled]="!createTokenForm.valid"
          [onClick]="deployContract().bind(this)"
          text="Create token"
          class="py-2 px-10 flex flex-row text-sm font-semibold disabled:bg-gray-300 disabled:text-gray-700 items-center 
          justify-center bg-violet-700 uppercase text-white rounded-full mt-8"
        >
        </button>
      </div>
    </form>
  </div>
  <div class="w-5/12 border-l pl-4">
    <div>
      <app-info-snippet
        [content]="{ title: 'ERC-20 Token Standard', sections: [
          'ERC-20 is the technical standard for fungible tokens created using the Ethereum blockchain. A fungible token is one that is interchangeable with another tokenâ€”where the well-known non-fungible tokens (NFTs) are not interchangeable.',
          'ERC-20 allows different smart-contract enabled tokens a way to be exchanged. Tokens, in this regard, are a representation of an asset, right, ownership, access, cryptocurrency, or anything else that is not unique in and of itself but can be transferred.', 
        ] }"></app-info-snippet>

        <div class="mt-2 mb-2"></div>

        <app-info-snippet
        [type]="'WARNING'"
        [content]="{ title: 'Fixed parameters!', sections: [
          'Some fields cannot be changed, once they are initialized. They are marked by a yellow triangle.',
        ] }"></app-info-snippet>

        <div class="mt-2 mb-2"></div>

        <app-info-snippet
      [type]="'DANGER'"
      [content]="{ title: 'This contract is not verified', sections: [
        'This contract was uploaded by an unverified developer. Please exercise caution if using it in your apps.',
        ]}"
    ></app-info-snippet>
    </div>
  </div>
</div>
