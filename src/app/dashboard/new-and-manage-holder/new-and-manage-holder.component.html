<div class="w-full bg-white shadow-sm p-8 mx-4 my-2 rounded-lg flex flex-col">
  <div class="flex flex-row justify-between">

    <div class="flex flex-row justify-start items-end">
      <!-- TOKENS -->
      <div (click)="changeTab(tabType.Manage)" [class.active-content-item]="activeTab === tabType.Manage"
        class="w-52 text-center border-gray-200 flex flex-row items-center justify-center text-sm uppercase pb-4 border-b-4 font-semibold text-gray-500 cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5" />
        </svg>
        <div class="ml-2">
          Contracts
        </div>
      </div>

      <!-- PENDING -->
      <div (click)="changeTab(tabType.Pending)" [class.active-content-item]="activeTab === tabType.Pending"
        class="w-52 text-center border-gray-200 flex flex-row items-center justify-center text-sm uppercase pb-4 border-b-4 font-semibold text-gray-500 cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div class="ml-2">Requests</div>
      </div>
    </div>


    <div class="flex flex-row justify-end items-end">
      <!-- NEW -->
      <div (click)="changeTab(tabType.Add)" class=" flex flex-row justify-center 
items-center pb-2 text-center text-sm font-semibold 
border-b-4 border-transparent text-gray-700 uppercase cursor-pointer">

        <div [class.text-white]="activeTab === tabType.Add" [class.!bg-violet-700]="activeTab === tabType.Add"
          class="px-4 py-2 w-full mx-2 bg-gray-100 border border-gray-200 rounded-lg flex flex-row items-center justify-center">

          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <div class="ml-2">Deploy Contract</div>
        </div>
      </div>

      <!-- IMPORT -->
      <div (click)="changeTab(tabType.Import)" class=" flex flex-row justify-center 
items-center pb-2 text-center text-sm font-semibold 
text-gray-700 uppercase border-b-4 border-transparent cursor-pointer">

        <div [class.text-white]="activeTab === tabType.Import" [class.!bg-violet-700]="activeTab === tabType.Import"
          class="px-4 py-2 mx-2 w-full bg-gray-100 border border-gray-200 rounded-lg flex flex-row items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
          </svg>
          <div class="ml-2">Connect Contract</div>
        </div>
      </div>
    </div>


  </div>

  <ng-container *ngIf="activeTab === tabType.Add">
    <div class="border-gray-100 text-gray-700 border-2 p-4 flex flex-row items-center bg-gray-100 rounded-tr-lg">
      <div class="w-3/12 text-sm uppercase font-semibold">Contract ID</div>
      <div class="w-4/12 text-sm uppercase font-semibold">Details</div>
      <!-- SEARCH -->
      <div class="w-5/12 text-sm uppercase font-semibold">
        <div class="border rounded-lg py-1 border-gray-300 px-4 bg-gray-200 flex flex-row items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          <input placeholder="Search is not yet implemented" class="w-full border-none bg-transparent text-sm" type="text">
        </div>
      </div>
    </div>

    <div *ngIf="deployableContracts$ | async as deployableContracts; else loading">
      
    <div *ngFor="let contract of deployableContracts" class="border-gray-100 border-x border-b p-4 flex flex-row">
      <div class="w-3/12 font-medium text-gray-700 text-sm flex flex-col justify-center">
        <!-- <div class="font-semibold text-gray-500 text-xs">{{ contract.splitID[0] }}</div>
        <div class="ml-3 font-medium text-gray-700 mt-1 flex flex-row items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
          <div class="ml-1">
            {{ contract.splitID[1] }}
          </div>
        </div> -->
        {{ contract.name }}
      </div>
      <div class="w-7/12 text-sm flex flex-col justify-start pr-4 text-gray-500">
        <!-- <div class="mb-2">ERC20 fungible token with fixed supply and ability to burn the tokens</div> -->
        <div class="flex flex-col h-full text-sm flex-wrap justify-start">
          <div>
            {{contract.description}}
          </div>
          <div class="flex flex-row">
            <div class="pr-1 text-xs mt-1" 
            *ngFor="let tag of contract.tags">
            #{{tag}}
          </div>
          </div>
         
        </div>
      </div>
      <div class="w-2/12 flex flex-col justify-center">
          <button class="bg-gray-200 rounded-full flex flex-row items-center justify-center 
            px-8 py-3 font-semibold uppercase hover:bg-gray-300 transition-all
           text-gray-700 text-xs" [routerLink]="'create/from-manifest/' + contract.id">
           <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
          </svg>
          <div class="ml-2">Create</div>
          </button>
      </div>
    </div>
  </div>

  </ng-container>

  <ng-container *ngIf="activeTab === tabType.Pending">
    <div class="border-gray-100 text-gray-700 border-2 p-4 flex flex-row bg-gray-100 rounded-tr-lg">
      <div class="w-3/12 text-sm uppercase font-semibold">Alias</div>
      <div class="w-4/12 text-sm uppercase font-semibold">Contract Type</div>
      <div class="w-2/12 text-sm uppercase font-semibold">Created at</div>
      <div class="w-3/12 text-sm uppercase font-semibold flex flex-ro rounded-lg items-center justify-center">          
      </div>
    </div>
    <div *ngIf="pendingContractDeploymentRequests$ | async as requests; else loading">
      <ng-container *ngIf="requests.length > 0; else emptyList">
        <div *ngFor="let request of requests; let i = index">
          <div class="py-2 pl-4 border-b font-medium flex flex-row items-center text-sm text-gray-700 border-x">
            <div class="w-3/12 text-sm">
              {{request.alias}}
            </div>
            <div class="w-4/12">
              <div *ngIf="manifests$ | async as manifests; else manifestLoading">
                {{manifests[i].name}}
              </div>
              <ng-template #manifestLoading>
                <app-spinner></app-spinner>
              </ng-template>
            </div>
            <div class="w-2/12">
              {{request.created_at | date:'short'}}
            </div>
            <a target="_blank" [routerLink]="'/deploy-contract/' + request.id | issuerPath" class="w-3/12 px-2 cursor-pointer">
              <div class="w-full py-2 bg-violet-700 text-white rounded-full
               text-center uppercase text-xs font-semibold hover:bg-violet-900 transition-all">
                Deploy now
              </div>
            </a>
          </div>
  
        </div>
      </ng-container>
      

    </div>
    
  </ng-container>

  <ng-container *ngIf="activeTab === tabType.Manage">
    <ng-container *ngIf="deployedContracts$ | async as deployedContracts; else loading">
      <div class="border-gray-100 border-2 p-4 flex flex-row bg-gray-100 rounded-tr-lg">
        <div class="w-3/12 text-sm uppercase font-semibold">Alias</div>
        <div class="w-5/12 text-sm uppercase font-semibold">Contract Type ID</div>
        <div class="w-2/12 text-sm uppercase font-semibold">Address</div>
      </div>
  
      <ng-container *ngIf="deployedContracts.length > 0; else emptyList">
        <div *ngFor="let contract of deployedContracts" routerLink="interact/{{contract.contract_id}}/{{contract.id}}"
        class="border-gray-100 hover:bg-violet-100 border-b border-x p-4 flex flex-row cursor-pointer">
        <div class="w-3/12 text-sm">{{ contract.alias }}</div>
        <div class="w-5/12 text-sm">
          {{ contract.contract_id }}
        </div>
        <div class="w-2/12 text-sm">
          {{ contract.contract_address | addrShort}}
          <app-explorer-link [value]="contract.contract_address"></app-explorer-link>
        </div>
      </div>
      </ng-container>
      
    </ng-container>
    
  </ng-container>

  <ng-container *ngIf="activeTab === tabType.Import">
    <div class="border-gray-100 border-2 p-4 flex flex-row bg-gray-100 rounded-tr-lg">
      
    </div>

    <div *ngFor="let item of manageItems"
      class="border-gray-100 hover:bg-violet-100 border-2 p-4 flex flex-row cursor-pointer">
      <app-info-snippet
        [content]="{ title: 'Coming Soon', sections: [ 'Importing contracts from your favorite protocols is coming soon!' ] }"
      ></app-info-snippet>
    </div>
  </ng-container>
</div>

<ng-template #loading>
  <div class="border border-gray-200 rounded-lg py-16 flex flex-row justify-center">
    <app-spinner></app-spinner>
  </div>
</ng-template>

<ng-template #emptyList>
  <div class="border border-gray-200 rounded-lg py-16 flex flex-row justify-center text-sm font-medium">
    No items available
  </div>
</ng-template>